(function(f,d){var c,a,h,i,g,b,e;c='<div class="easy-palette"></div>';g=navigator.userAgent.toLowerCase();b=navigator.appName==="Microsoft Internet Explorer";e=b?parseFloat(g.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0;nonGradientIE=(b&&e<10);gradientType=false;a=["-moz-","-webkit-","-o-","-ms-"];h=".easy-palette{display:block;position:relative}.easy-palette,.easy-palette *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.easy-palette{margin-top:4px}.easy-palette-error{background-color:#ffafaf}.easy-palette-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.easy-palette .easy-palette-item{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;float:left;margin: 0px 2px 5px 2px;}.easy-palette-ie-9 .easy-palette-item{box-shadow:none;border-radius:0}.easy-palette-ie-9 .easy-palette-item{outline:1px solid rgba(0,0,0,.1)}.easy-palette-ie-lt9 .easy-palette-item{outline:1px solid #aaa}.easy-palette-container{position:absolute;top:0;right:0;left:0;bottom:0}.easy-palette-border .easy-palette-container{top:10px;right:10px;left:9px;bottom:10px}";if(nonGradientIE&&e<=7){f.fn.easypalette=f.noop;f.support.easypalette=false;return}f.support.easypalette=true;i={options:{color:false,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:true,border:true,target:false,width:200,palettes:true},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:false,_create:function(){var k=this,l=k.element,j=k.options.color||l.val();if(l.is("input")){if(k.options.target){k.palette=f(c).appendTo(k.options.target)}else{k.palette=f(c).insertAfter(l)}k._addInputListeners(l)}else{l.append(c);k.palette=l.find(".easy-palette")}if(b){if(e===9){k.palette.addClass("easy-palette-ie-9")}else{if(e<=8){k.palette.addClass("easy-palette-ie-lt9")}}}else{if(g.indexOf("compatible")<0&&g.indexOf("khtml")<0&&g.match(/mozilla/)){k.palette.addClass("easy-palette-mozilla")}}if(k.options.palettes){k._addPalettes()}k._color=new Color(j).setHSpace(k.options.mode);k.options.color=k._color.toString();k.controls={square:k.palette.find(".easy-palette-square"),};if(k.options.hide){k.palette.hide()}if(k.options.border){k.palette.addClass("easy-palette-border")}k._initControls();k.active="external";k._dimensions();k._change()},_has:function(l,k){var j=false;f.each(k,function(n,m){if(l===m){j=true;return false}});return j},_addPalettes:function(){var l=f('<div class="easy-palette-container" />'),k=f('<a class="easy-palette-item" tabindex="0" />'),j=f.isArray(this.options.palettes)?this.options.palettes:this._palettes;if(this.palette.find(".easy-palette-container").length){l=this.palette.find(".easy-palette-container").detach().html("")}f.each(j,function(m,n){k.clone().data("color",n).css("backgroundColor",n).appendTo(l).height(10).width(10)});this.palette.append(l)},_getHSpaceColor:function(){return(this.options.mode==="hsv")?this._color.toHsv():this._color.toHsl()},_dimensions:function(r){var w=this,k=w.options,t=w.controls,v=t.square,l=w.palette.find(".easy-palette-strip"),o="100%",m=20,s=k.border?k.width-m:k.width,q,n=f.isArray(k.palettes)?k.palettes.length:w._palettes.length,p,u,j;if(r){v.css("width","");l.css("width","");w.palette.css({width:"",height:""})}o=s*(parseFloat(o)/100);q=k.border?o+m:o;v.width(o).height(o);w.palette.css({width:k.width,height:q});if(!k.palettes){return w.palette.css("paddingBottom","")}palettesPerLine=7;p=4;j=o-(palettesPerLine*p);u=j/palettesPerLine;w.palette.find(".easy-palette-item").each(function(x){var y=x===0?0:p;f(this).css({width:u,height:u})})},_addInputListeners:function(k){var j=this,l=100,m=function(o){var n=new Color(k.val()),p=k.val().replace(/^#/,"");k.removeClass("easy-palette-error");if(n.error){if(p!==""){k.addClass("easy-palette-error")}}else{if(n.toString()!==j._color.toString()){if(!(o.type==="keyup"&&p.match(/^[0-9a-fA-F]{3}$/))){j._setOption("color",n.toString())}}}};k.on("change",m).on("keyup",j._debounce(m,l));if(j.options.hide){k.one("focus",function(){j.show()})}},_initControls:function(){var l=this,k=l.controls,m=k.square,j=l.options.controls;if(l.options.palettes){l._paletteListeners()}},_paletteListeners:function(){var j=this;j.palette.find(".easy-palette-container").on("click.palette",".easy-palette-item",function(){j._color.fromCSS(f(this).data("color"));j.active="external";j._change()}).on("keydown.palette",".easy-palette-item",function(k){if(!(k.keyCode===13||k.keyCode===32)){return true}k.stopPropagation();f(this).click()})},_setOption:function(o,p){var l=this,n=l.options[o],k=false,j,m,q;l.options[o]=p;switch(o){case"color":p=""+p;j=p.replace(/^#/,"");m=new Color(p).setHSpace(l.options.mode);if(m.error){l.options[o]=n}else{l._color=m;l.options.color=l.options[o]=l._color.toString();l.active="external";l._change()}break;case"palettes":k=true;if(p){l._addPalettes()}else{l.palette.find(".easy-palette-container").remove()}if(!n){l._paletteListeners()}break;case"width":k=true;break;case"border":k=true;q=p?"addClass":"removeClass";l.palette[q]("easy-palette-border");break;case"mode":case"controls":if(n===p){return}q=l.element;n=l.options;n.hide=!l.palette.is(":visible");l.destroy();l.palette.remove();return f(l.element).easypalette(n)}if(k){l._dimensions(true)}},_change:function(){var m=this,l=m.controls,k=m._getHSpaceColor(),p=["square","strip"],j=m.options.controls,n=j[m.active]||"external",o=m.hue;m.options.color=m._color.toString();if(m._inited){m._trigger("change",{type:m.active},{color:m._color})}if(m.element.is(":input")&&!m._color.error){m.element.removeClass("easy-palette-error");if(m.element.val()!==m._color.toString()){m.element.val(m._color.toString())}}m._inited=true;m.active=true},_debounce:function(l,n,k){var m,j;return function(){var r=this,q=arguments,p,o;p=function(){m=null;if(!k){j=l.apply(r,q)}};o=k&&!m;clearTimeout(m);m=setTimeout(p,n);if(o){j=l.apply(r,q)}return j}},show:function(){this.palette.show()},hide:function(){this.palette.hide()},toggle:function(){this.palette.toggle()},color:function(j){if(j===true){return this._color.clone()}else{if(j===d){return this._color.toString()}}this.option("color",j)}};f.widget("a8c.easypalette",i);f('<style id="easy-palette-css">'+h+"</style>").appendTo("head")}(jQuery));
/* Color.js - v0.9.9 - 2012-11-20
* https://github.com/Automattic/Color.js
* Copyright (c) 2012 Matt Wiebe; Licensed GPL v2 */
(function(b,d){var e=function(f,g){if(!(this instanceof e)){return new e(f,g)}return this._init(f,g)};e.fn=e.prototype={_color:0,_alpha:1,error:false,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(f){var g="noop";switch(typeof f){case"object":if(f.a!==d){this.a(f.a)}g=(f.r!==d)?"fromRgb":(f.l!==d)?"fromHsl":(f.v!==d)?"fromHsv":g;return this[g](f);case"string":return this.fromCSS(f);case"number":return this.fromInt(parseInt(f,10))}return this},_error:function(){this.error=true;return this},clone:function(){var f=new e(this.toInt()),h=["_alpha","_hSpace","_hsl","_hsv","error"];for(var g=h.length-1;g>=0;g--){f[h[g]]=this[h[g]]}return f},setHSpace:function(f){this._hSpace=(f==="hsv")?f:"hsl";return this},noop:function(){return this},fromCSS:function(g){var k,j,f=/^(rgb|hs(l|v))a?\(/;this.error=false;g=g.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"");if(g.match(f)&&g.match(/\)$/)){j=g.replace(/(\s|%)/g,"").replace(f,"").replace(/,?\);?$/,"").split(",");if(j.length<3){return this._error()}if(j.length===4){this.a(parseFloat(j.pop()));if(this.error){return this}}for(var h=j.length-1;h>=0;h--){j[h]=parseInt(j[h],10);if(isNaN(j[h])){return this._error()}}if(g.match(/^rgb/)){return this.fromRgb({r:j[0],g:j[1],b:j[2]})}else{if(g.match(/^hsv/)){return this.fromHsv({h:j[0],s:j[1],v:j[2]})}else{return this.fromHsl({h:j[0],s:j[1],l:j[2]})}}}else{return this.fromHex(g)}},fromRgb:function(f,g){if(typeof f!=="object"||f.r===d||f.g===d||f.b===d){return this._error()}this.error=false;return this.fromInt(parseInt((f.r<<16)+(f.g<<8)+f.b,10),g)},fromHex:function(f){f=f.replace(/^#/,"").replace(/^0x/,"");if(f.length===3){f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]}this.error=!/^[0-9A-F]{6}$/i.test(f);return this.fromInt(parseInt(f,16))},fromHsl:function(t){var f,n,o,i,j,m,u,k;if(typeof t!=="object"||t.h===d||t.s===d||t.l===d){return this._error()}this._hsl=t;this._hSpace="hsl";m=t.h/360;u=t.s/100;k=t.l/100;if(u===0){f=n=o=k}else{i=k<0.5?k*(1+u):k+u-k*u;j=2*k-i;f=this.hue2rgb(j,i,m+1/3);n=this.hue2rgb(j,i,m);o=this.hue2rgb(j,i,m-1/3)}return this.fromRgb({r:f*255,g:n*255,b:o*255},true)},fromHsv:function(o){var n,A,y,j,u,x,m,w,l,k,z;if(typeof o!=="object"||o.h===d||o.s===d||o.v===d){return this._error()}this._hsv=o;this._hSpace="hsv";n=o.h/360;A=o.s/100;y=o.v/100;m=Math.floor(n*6);w=n*6-m;l=y*(1-A);k=y*(1-w*A);z=y*(1-(1-w)*A);switch(m%6){case 0:j=y;u=z;x=l;break;case 1:j=k;u=y;x=l;break;case 2:j=l;u=y;x=z;break;case 3:j=l;u=k;x=y;break;case 4:j=z;u=l;x=y;break;case 5:j=y;u=l;x=k;break}return this.fromRgb({r:j*255,g:u*255,b:x*255},true)},fromInt:function(f,g){this._color=parseInt(f,10);if(isNaN(this._color)){this._color=0}if(this._color>16777215){this._color=16777215}else{if(this._color<0){this._color=0}}if(g===d){this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0}return this},hue2rgb:function(h,g,f){if(f<0){f+=1}if(f>1){f-=1}if(f<1/6){return h+(g-h)*6*f}if(f<1/2){return g}if(f<2/3){return h+(g-h)*(2/3-f)*6}return h},toString:function(){var g=parseInt(this._color,10).toString(16);if(this.error){return""}if(g.length<6){for(var f=6-g.length-1;f>=0;f--){g="0"+g}}return"#"+g},toCSS:function(h,i){h=h||"hex";i=parseFloat(i||this._alpha);switch(h){case"rgb":case"rgba":var g=this.toRgb();if(i<1){return"rgba( "+g.r+", "+g.g+", "+g.b+", "+i+" )"}else{return"rgb( "+g.r+", "+g.g+", "+g.b+" )"}break;case"hsl":case"hsla":var f=this.toHsl();if(i<1){return"hsla( "+f.h+", "+f.s+"%, "+f.l+"%, "+i+" )"}else{return"hsl( "+f.h+", "+f.s+"%, "+f.l+"% )"}break;default:return this.toString()}},toRgb:function(){return{r:255&(this._color>>16),g:255&(this._color>>8),b:255&(this._color)}},toHsl:function(){var o=this.toRgb();var f=o.r/255,m=o.g/255,p=o.b/255;var q=Math.max(f,m,p),j=Math.min(f,m,p);var k,t,i=(q+j)/2;if(q===j){k=t=0}else{var n=q-j;t=i>0.5?n/(2-q-j):n/(q+j);switch(q){case f:k=(m-p)/n+(m<p?6:0);break;case m:k=(p-f)/n+2;break;case p:k=(f-m)/n+4;break}k/=6}k=Math.round(k*360);if(k===0&&this._hsl.h!==k){k=this._hsl.h}t=Math.round(t*100);if(t===0&&this._hsl.s){t=this._hsl.s}return{h:k,s:t,l:Math.round(i*100)}},toHsv:function(){var m=this.toRgb();var f=m.r/255,k=m.g/255,n=m.b/255;var o=Math.max(f,k,n),i=Math.min(f,k,n);var j,q,p=o;var l=o-i;q=o===0?0:l/o;if(o===i){j=q=0}else{switch(o){case f:j=(k-n)/l+(k<n?6:0);break;case k:j=(n-f)/l+2;break;case n:j=(f-k)/l+4;break}j/=6}j=Math.round(j*360);if(j===0&&this._hsv.h!==j){j=this._hsv.h}q=Math.round(q*100);if(q===0&&this._hsv.s){q=this._hsv.s}return{h:j,s:q,v:Math.round(p*100)}},toInt:function(){return this._color},toIEOctoHex:function(){var f=this.toString();var g=parseInt(255*this._alpha,10).toString(16);if(g.length===1){g="0"+g}return"#"+g+f.replace(/^#/,"")},toLuminosity:function(){var f=this.toRgb();return 0.2126*Math.pow(f.r/255,2.2)+0.7152*Math.pow(f.g/255,2.2)+0.0722*Math.pow(f.b/255,2.2)},getDistanceLuminosityFrom:function(g){if(!(g instanceof e)){throw"getDistanceLuminosityFrom requires a Color object"}var h=this.toLuminosity();var f=g.toLuminosity();if(h>f){return(h+0.05)/(f+0.05)}else{return(f+0.05)/(h+0.05)}},getMaxContrastColor:function(){var f=this.toLuminosity();var g=(f>=0.5)?"000000":"ffffff";return new e(g)},getGrayscaleContrastingColor:function(g){if(!g){return this.getMaxContrastColor()}var i=(g<5)?5:g;var f=this.getMaxContrastColor();g=f.getDistanceLuminosityFrom(this);if(g<=i){return f}var h=(0===f.toInt())?1:-1;while(g>i){f=f.incrementLightness(h);g=f.getDistanceLuminosityFrom(this)}return f},getReadableContrastingColor:function(k,j){if(!k instanceof e){return this}var f=(j===d)?5:j;var i=k.getDistanceLuminosityFrom(this);var h=k.getMaxContrastColor();var g=h.getDistanceLuminosityFrom(k);if(g<=f){return h}else{if(i>=f){return this}}var l=(0===h.toInt())?-1:1;while(i<f){this.incrementLightness(l);i=this.getDistanceLuminosityFrom(k);if(this._color===0||this._color===16777215){break}}return this},a:function(g){if(g===d){return this._alpha}var f=parseFloat(g);if(isNaN(f)){return this._error()}this._alpha=f;return this},darken:function(f){f=f||5;return this.l(-f,true)},lighten:function(f){f=f||5;return this.l(f,true)},saturate:function(f){f=f||15;return this.s(f,true)},desaturate:function(f){f=f||15;return this.s(-f,true)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,true)},getSplitComplement:function(f){f=f||1;var g=180+(f*30);return this.h(g,true)},getAnalog:function(f){f=f||1;var g=f*30;return this.h(g,true)},getTetrad:function(f){f=f||1;var g=f*60;return this.h(g,true)},getTriad:function(f){f=f||1;var g=f*120;return this.h(g,true)},_partial:function(f){var g=a[f];return function(i,j){var h=this._spaceFunc("to",g.space);if(i===d){return h[f]}if(j===true){i=h[f]+i}if(g.mod){i=i%g.mod}if(g.range){i=(i<g.range[0])?g.range[0]:(i>g.range[1])?g.range[1]:i}h[f]=i;return this._spaceFunc("from",g.space,h)}},_spaceFunc:function(f,g,j){var h=g||this._hSpace,i=f+h.charAt(0).toUpperCase()+h.substr(1);return this[i](j)}};var a={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var c in a){if(a.hasOwnProperty(c)){e.fn[c]=e.fn._partial(c)}}b.Color=e}(typeof exports==="object"&&exports||this));